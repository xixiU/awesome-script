# HTML5 视频播放工具

一个功能强大的视频播放增强脚本，为网页视频播放器添加丰富的快捷键和功能。

## ✨ 主要功能

### 🎬 视频控制

- **播放速度调节**：自由调整视频播放速度（0.1x - 16x）
- **精确帧控制**：逐帧前进/后退，方便精确定位
- **快进/快退**：支持 5 秒和 20 秒快速跳转
- **音量控制**：精确的音量调节

### 📸 高级功能

- **视频截图**：一键截取当前画面并保存为 PNG
- **画中画模式**：支持浮窗播放
- **视频缓存**：可选择缓存整个视频
- **万能网页全屏**：适配各种播放器的全屏功能

### 🌐 支持的网站

#### 国内视频网站

- 哔哩哔哩（bilibili）
- 腾讯视频（QQ）
- 优酷、土豆
- 爱奇艺
- 西瓜视频
- A站（AcFun）
- 芒果TV
- 咪咕视频
- 搜狐视频
- 网易云课堂
- 百度网盘视频

#### 国际视频网站

- **YouTube** ⭐（已修复 Trusted Types 兼容性）
- TED
- Twitch

#### 直播平台

- 斗鱼
- 虎牙
- YY直播
- 龙珠直播
- 战旗TV

## ⌨️ 快捷键说明

### 基础控制

| 快捷键 | 功能 | 备注 |
|--------|------|------|
| **空格** | 暂停/播放 | YouTube 除外 |
| **← →** | 快退/快进 5 秒 | |
| **Shift + ← →** | 快退/快进 20 秒 | |
| **↑ ↓** | 增加/减少音量 | |
| **Enter** | 切换全屏 | |
| **Shift + Enter** | 切换网页全屏 | |
| **ESC** | 退出全屏 | |

### 播放速度

| 快捷键 | 功能 | YouTube |
|--------|------|---------|
| **C 键** | 加速 0.1 倍 | **V 键** |
| **X 键** | 减速 0.1 倍 | X 键 |
| **Z 键** | 切换加速状态 | Z 键 |

> 💡 抖音使用：A 键切换速度，S 键减速，V 键加速

### 帧控制

| 快捷键 | 功能 | YouTube |
|--------|------|---------|
| **D 键** | 上一帧 | D 键 |
| **F 键** | 下一帧 | **E 键** |

### 高级功能

| 快捷键 | 功能 |
|--------|------|
| **P 键** | 视频截图 |
| **I 键** | 切换画中画模式 |
| **M 键** | 开始/停止缓存视频 |
| **N 键** | 播放下一集 |
| **鼠标中键** | 快进 5 秒 |
| **双击视频** | 切换网页全屏 |

## 🚀 安装使用

### 1. 安装油猴（Tampermonkey）

首先需要安装浏览器扩展：

- [Chrome/Edge](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
- [Firefox](https://addons.mozilla.org/firefox/addon/tampermonkey/)

### 2. 安装脚本

1. 打开油猴管理面板
2. 点击"新建脚本"
3. 复制 `html5videoPlay.js` 的全部内容
4. 粘贴并保存

### 3. 刷新网页

访问支持的视频网站，脚本会自动激活。

## 🔧 配置选项

点击油猴图标 → 选择此脚本，可以看到以下选项：

- **√ 记忆播放速度**：自动记住你上次设置的播放速度
- **脚本功能快捷键表**：查看完整的快捷键列表

## 📝 特别说明

### YouTube 适配

由于 YouTube 使用了 Trusted Types 安全策略，我们对脚本进行了特别优化：

- ✅ 所有快捷键正常工作
- ✅ 速度调节使用 V/X/Z 键
- ✅ 下一帧使用 E 键
- ✅ 没有控制台错误

详细技术说明请查看 [YOUTUBE_FIX.md](./YOUTUBE_FIX.md)

### 视频缓存功能

使用 M 键缓存视频时：

- 确认 = 缓存整个视频
- 取消 = 按默认缓冲区大小缓存

💡 直接的媒体类型（如 MP4）无法缓存，只对流媒体有效。

### Chrome 媒体缓存设置

可以通过启动参数增加媒体缓存大小到 840MB：

```
--media-cache-size=880008000
```

## 🐛 问题排查

### 快捷键不工作

1. 检查是否有输入框处于焦点状态
2. 确认当前网站在支持列表中
3. 刷新页面重试
4. 查看浏览器控制台是否有错误

### YouTube 相关问题

如果在 YouTube 上遇到问题：

1. 确保使用最新版本的脚本
2. 清除浏览器缓存
3. 禁用其他可能冲突的脚本
4. 查看控制台（F12）是否有 Trusted Types 错误

### 速度调节无效

某些网站（如 QQ、百度）可能限制了速度调节功能。

## 💻 开发信息

- **版本**：2.0.2
- **作者**：基于 Greasyfork 用户 7036 的脚本改进
- **许可**：MIT License
- **主页**：<https://bbs.kafan.cn/thread-2093014-1-1.html>

## 🙏 致谢

- 感谢 Dario Costa 提供的英语和意大利语翻译
- 感谢所有贡献者和用户的反馈

## 📮 反馈

如果遇到问题或有建议，欢迎：

- 在浏览器控制台查看详细日志
- 提供具体的错误信息和复现步骤
- 说明浏览器版本和操作系统

---

**享受更好的视频观看体验！** 🎉
